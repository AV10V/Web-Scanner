<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprehensive User Info</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.5;
            text-align: center;
        }
        .hidden {
            display: none;
        }
        .container {
            margin-top: 30px;
            text-align: left;
            display: inline-block;
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
        }
        .info {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <!-- Email Input Form -->
    <div id="email-prompt">
        <h2>Enter Your Email</h2>
        <form id="email-form" onsubmit="handleEmailSubmit(event)">
            <input type="email" id="user-email" placeholder="Your Email" required>
            <button type="submit">Submit</button>
        </form>
    </div>

    <!-- Main Content Section -->
    <div id="main-content" class="hidden">
        <h1 id="greeting"></h1>
        <div class="container">
            <div class="info"><strong>Your Email:</strong> <span id="email-display"></span></div>
            <div class="info"><strong>Device Type:</strong> <span id="device-type"></span></div>
            <div class="info"><strong>Browser Engine:</strong> <span id="browser-engine"></span></div>
            <div class="info"><strong>Browser Name:</strong> <span id="browser-name"></span></div>
            <div class="info"><strong>Browser Version:</strong> <span id="browser-version"></span></div>
            <div class="info"><strong>Operating System:</strong> <span id="os"></span></div>
            <div class="info"><strong>Screen Resolution:</strong> <span id="screen-resolution"></span></div>
            <div class="info"><strong>Available Screen Size:</strong> <span id="available-screen-size"></span></div>
            <div class="info"><strong>Color Depth:</strong> <span id="color-depth"></span></div>
            <div class="info"><strong>Hardware Concurrency:</strong> <span id="hardware-concurrency"></span></div>
            <div class="info"><strong>Touch Support:</strong> <span id="touch-support"></span></div>
            <div class="info"><strong>Max Touch Points:</strong> <span id="max-touch-points"></span></div>
            <div class="info"><strong>Cookies Enabled:</strong> <span id="cookies-enabled"></span></div>
            <div class="info"><strong>JavaScript Enabled:</strong> <span id="javascript-enabled"></span></div>
            <div class="info"><strong>Preferred Color Scheme:</strong> <span id="color-scheme"></span></div>
            <div class="info"><strong>Local Storage Supported:</strong> <span id="local-storage"></span></div>
            <div class="info"><strong>Session Storage Supported:</strong> <span id="session-storage"></span></div>
            <div class="info"><strong>Time Zone:</strong> <span id="timezone"></span></div>
            <div class="info"><strong>Preferred Language:</strong> <span id="language"></span></div>
            <div class="info"><strong>Geolocation:</strong> <span id="geolocation"></span></div>
            <div class="info"><strong>Installed Plugins:</strong> <span id="plugins"></span></div>
            <div class="info"><strong>Available MIME Types:</strong> <span id="mime-types"></span></div>
            <div class="info"><strong>Media Devices:</strong> <span id="media-devices"></span></div>
            <div class="info"><strong>Connection Type:</strong> <span id="connection-type"></span></div>
            <div class="info"><strong>Effective Bandwidth:</strong> <span id="effective-bandwidth"></span></div>
            <div class="info"><strong>Device Memory:</strong> <span id="device-memory"></span></div>
            <div class="info"><strong>Battery Status:</strong> <span id="battery-status"></span></div>
            <div class="info"><strong>Do Not Track:</strong> <span id="do-not-track"></span></div>
        </div>
    </div>

    <script>
        // Helper to check feature availability
        const isFeatureAvailable = (feature) => typeof feature !== 'undefined' && feature !== null;

        // Retrieve additional system information
        async function retrieveSystemInfo() {
            const systemInfo = {
                deviceType: /Mobi/i.test(navigator.userAgent) ? 'Mobile' : 'Desktop',
                browserEngine: navigator.product || 'Unknown',
                browserName: navigator.userAgentData?.brands?.[0]?.brand || navigator.appName,
                browserVersion: navigator.userAgentData?.brands?.[0]?.version || navigator.appVersion,
                os: navigator.platform || 'Unknown',
                screenResolution: `${screen.width}x${screen.height}`,
                availableScreenSize: `${screen.availWidth}x${screen.availHeight}`,
                colorDepth: `${screen.colorDepth}-bit`,
                hardwareConcurrency: navigator.hardwareConcurrency || 'Unknown',
                touchSupport: isFeatureAvailable(navigator.maxTouchPoints) ? 'Yes' : 'No',
                maxTouchPoints: navigator.maxTouchPoints || 0,
                cookiesEnabled: navigator.cookieEnabled ? 'Yes' : 'No',
                javascriptEnabled: 'Yes',
                colorScheme: window.matchMedia('(prefers-color-scheme: dark)').matches ? 'Dark' : 'Light',
                localStorage: isFeatureAvailable(window.localStorage) ? 'Yes' : 'No',
                sessionStorage: isFeatureAvailable(window.sessionStorage) ? 'Yes' : 'No',
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone || 'Unknown',
                language: navigator.language || 'Unknown',
                plugins: navigator.plugins.length > 0 ? Array.from(navigator.plugins).map(p => p.name).join(', ') : 'None',
                mimeTypes: navigator.mimeTypes.length > 0 ? Array.from(navigator.mimeTypes).map(mt => mt.type).join(', ') : 'None',
                connectionType: navigator.connection?.effectiveType || 'Unknown',
                effectiveBandwidth: navigator.connection?.downlink || 'Unknown',
                deviceMemory: navigator.deviceMemory || 'Unknown',
                batteryStatus: isFeatureAvailable(navigator.getBattery)
                    ? await navigator.getBattery().then(b => `${(b.level * 100).toFixed(0)}%`)
                    : 'Unavailable',
                doNotTrack: navigator.doNotTrack || 'Unknown',
                geolocation: await getUserGeolocation(),
                mediaDevices: await getMediaDevices()
            };
            return systemInfo;
        }

        // Get geolocation
        async function getUserGeolocation() {
            if (!navigator.geolocation) return 'Unavailable';
            return new Promise((resolve) =>
                navigator.geolocation.getCurrentPosition(
                    (position) => resolve(`Lat: ${position.coords.latitude}, Lon: ${position.coords.longitude}`),
                    () => resolve('Permission Denied')
                )
            );
        }

        // Get media devices
        async function getMediaDevices() {
            if (!navigator.mediaDevices) return 'Unavailable';
            const devices = await navigator.mediaDevices.enumerateDevices();
            return devices.map(d => d.label || d.kind).join(', ') || 'None';
        }

        // Handle email submission
        async function handleEmailSubmit(event) {
            event.preventDefault();
            const email = document.getElementById('user-email').value;

            // Hide email prompt and show main content
            document.getElementById('email-prompt').classList.add('hidden');
            document.getElementById('main-content').classList.remove('hidden');

            document.getElementById('email-display').textContent = email;
            document.getElementById('greeting').textContent = `Hello, ${email}!`;

            // Populate all the details
            const systemInfo = await retrieveSystemInfo();
            Object.entries(systemInfo).forEach(([key, value]) => {
                const element = document.getElementById(key);
                if (element) element.textContent = value;
            });
        }
    </script>
</body>
</html>
